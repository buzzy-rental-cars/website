<% title "Vehicles" %>

<% if policy(Vehicle).new? %>
  <div>
    <%= link_to 'New Vehicle', new_vehicle_path,
      class: "btn btn-default",
      role: "button"
    %>
  </div>
<% end %>

<% if @vehicles.present? && administrator? %>
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Photo</th>
        <th>Published?</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @vehicles.each do |vehicle| %>
        <tr>
          <td><%= link_to vehicle.name, vehicle %></td>
          <td><%= image_tag vehicle.photo_url(:thumbnail) %></td>
          <td><%= vehicle.published? ? "Yes" : "No" %></td>
          <td>
            <%= link_to 'Edit Vehicle', edit_vehicle_path(vehicle),
              class: "btn btn-default",
              role: "button"
            %>
          </td>
          <td>
            <%= link_to 'Delete Vehicle', vehicle, data:
              { confirm: 'Are you sure you want to delete this vehicle?' },
              method: :delete,
              class: "btn btn-danger",
              role: "button"
            %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
